file,lines,symbol_or_section,usage,replacement_strategy,can_remove,tracking
.env.example,26;28;29;30;31;32;36;40;75;96;97;98,ENV:PLUGIN_*,"项目级 compose/.env 中对 plugin DB、Redis、OAuth、admin key、encryption key 的配置入口","MPB-060：收敛 compose 后移除 PLUGIN_* 变量；若需兼容可保留但不再要求配置",Phase7,未处理
docker-compose.yml,48;49;50;98;99;100;101;102;105;106;107;110;111;131;132;133,"compose:backend+antihub-plugin(+db-init)","backend 通过 PLUGIN_API_BASE_URL 指向 antihub-plugin:8045；同时为 plugin 服务与 plugin DB 初始化透传 PLUGIN_DB_* / PLUGIN_REDIS_* / PLUGIN_ADMIN_API_KEY 等","MPB-060：移除 antihub-plugin 服务与相关 env 透传；MPB-030：backend 不再依赖外部 plugin HTTP",Phase7,未处理
docker-compose.core.yml,46;47;48;92;93;94;95;96;98;99;100;103;104,"compose.core:backend+antihub-plugin","core compose 中同样将 backend 指向 antihub-plugin:8045 并透传 plugin DB/Redis/admin key/OAuth 等","MPB-060：移除 plugin 依赖与 env 透传；MPB-030：backend 本地化实现 /api/plugin-api",Phase7,未处理
docker-compose.local.yml,11,compose.local:antihub-plugin,"本地 compose 通过 build context 引入 ./AntiHub-plugin","MPB-060：收敛 compose 后移除此文件中的 plugin 构建/依赖",Phase7,未处理
docker\docker-compose.db-init.yml,17;18;19,compose:db-init,"DB init 侧的 PLUGIN_DB_* 入口（用于初始化 plugin 数据库）","MPB-060：移除 plugin DB init 相关配置；若仅保留 Backend 单库则不再需要",Phase7,未处理
docker\postgres\init\01-init-plugin-db.sh,15;16;17;19;20;24;25;31;51;52,postgres-init:plugin-db,"postgres init 脚本：创建/配置 plugin DB 与用户；依赖 PLUGIN_DB_*","MPB-060：移除该脚本与调用；若需迁移数据改由 MPB-050 的迁移脚本处理",Phase7,未处理
docker\postgres\sync-plugin-db.sh,22;23;24;26;27;38;66;67,postgres-sync:plugin-db,"同步/修复 plugin DB 的辅助脚本；依赖 PLUGIN_DB_*","MPB-050：若用作迁移前置则改造为迁移脚本；否则 MPB-060 删除",Phase7,未处理
AntiHub-Backend\.env.example,29;30;31,ENV:PLUGIN_API_*,"Backend 模块示例环境变量：PLUGIN_API_BASE_URL/ADMIN_KEY/ENCRYPTION_KEY","MPB-030：本地实现后评估是否仍需 plugin_api_key 存储；不需要则移除整组配置与文档",Phase4,未处理
AntiHub-Backend\docker-compose.yml,34;35;36,compose(backend-only):PLUGIN_API_*,"Backend 模块本地 compose 中通过 localhost:8045 指向外部 plugin 服务","MPB-030：本地实现后移除对外部 plugin 的依赖配置",Phase4,未处理
AntiHub-Backend\app\core\config.py,45,Settings.plugin_api_*,"Backend 配置项：plugin_api_base_url/plugin_api_admin_key/plugin_api_encryption_key 默认值与读取","MPB-030：移除 outbound plugin HTTP 后评估是否保留这些 settings；如仍需兼容期加密存量 key 则保留 encryption_key 并标注迁移期",待确认,未处理
AntiHub-Backend\generate_encryption_key.py,10,generate_encryption_key,"生成并提示配置 PLUGIN_API_ENCRYPTION_KEY 的工具脚本","MPB-030：若不再需要 plugin_api_key 加密则删除/改名；否则保留并更新提示文案",待确认,未处理
AntiHub-Backend\app\services\plugin_api_service.py,29;136;137,PluginAPIService,"核心触点：通过 httpx 将 /api/plugin-api 的能力代理到外部 AntiHub-plugin（/api/*）；并缓存 plugin_api_key","MPB-030：替换为本地 DB 读写实现；移除任何对 AntiHub-plugin 的外部 HTTP 调用链",Phase4,未处理
AntiHub-Backend\app\api\routes\plugin_api.py,35,APIRouter(prefix=/plugin-api),"/api/plugin-api 路由入口；属于对外 contract（被 public routes 引用）","MPB-030：保持路径不变；将依赖服务替换为本地实现并补齐 410 返回约定",否,未处理
AntiHub-Backend\app\services\kiro_service.py,24;154;155;236,KiroService._proxy_admin_request/_proxy_stream_request,"Kiro 相关能力目前通过 base_url/admin_key 代理到 plug-in API（含 stream/admin 调用）","MPB-040：对齐渠道选择与 SSE 转发后移除对 plugin 的代理；最终 MPB-060 去掉 PLUGIN_API_ADMIN_KEY 依赖",Phase5,未处理
AntiHub-Backend\README.md,113;114;115;118;189;190;191;192;193;384;411;475;539;605;651,docs:plugin-api,"Backend 文档中包含 PLUGIN_API_* 配置说明、/api/plugin-api 路由清单与示例、集成文档引用","MPB-030/MPB-060：更新为“plugin 能力已合并到 backend”后的配置与路由说明；移除或标注废弃项",部分更新,未处理
AntiHub-Backend\app\api\routes\qwen.py,5,docsstring:qwen,"Qwen 路由文档声明账号数据存储在 AntiHub-plugin DB（不一定代表运行时依赖）","MPB-030：本地化实现后更新说明；若不再成立则改为 Backend DB",是,未处理
AntiHub-Backend\app\schemas\qwen.py,5,docsstring:qwen,"Qwen schema 说明当前通过 AntiHub-plugin 完成账号数据与请求转发（文档/约定）","MPB-030：本地化后更新 schema 说明以免误导",是,未处理
AntiHub-Backend\app\services\gemini_cli_service.py,230,comment,"仅注释：描述与参考项目 CLIProxyAPI / AntiHub-plugin 行为一致（fallback）","无需变更运行时；如后续不再需要可删除注释避免误导",可选,未处理
AntiHub-Backend\app\services\kiro_anthropic_converter.py,26,comment,"仅注释：与 AntiHub-plugin 中的 KIRO_MODEL_MAP 保持一致（用于映射兼容）","无需变更运行时；如 plugin 仓库移除后可把映射来源说明改为内部文档",可选,未处理
